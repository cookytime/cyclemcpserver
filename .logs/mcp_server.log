2026-02-12 10:34:55,663 - choreography-mcp - INFO - MCP HTTP auth enabled (Bearer token + scopes=mcp:access).
2026-02-12 10:34:55,680 - choreography-mcp - INFO - Starting MCP server transport=streamable-http host=127.0.0.1 port=8000
INFO:     Started server process [755835]
INFO:     Waiting for application startup.
2026-02-12 10:34:55,699 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager started
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2026-02-12 10:35:27,289 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager shutting down
INFO:     Application shutdown complete.
INFO:     Finished server process [755835]
2026-02-12 10:35:37,101 - choreography-mcp - INFO - MCP HTTP auth enabled (Bearer token + scopes=mcp:access).
2026-02-12 10:35:37,117 - choreography-mcp - INFO - Starting MCP server transport=streamable-http host=0.0.0.0 port=8000
INFO:     Started server process [756592]
INFO:     Waiting for application startup.
2026-02-12 10:35:37,135 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager started
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     192.168.1.4:37470 - "GET / HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:37486 - "GET /favicon.ico HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:60666 - "GET /sse HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:60672 - "GET /sse HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:60674 - "GET /favicon.ico HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:60678 - "POST /mcp HTTP/1.1" 401 Unauthorized
INFO:     192.168.1.4:60692 - "POST /mcp HTTP/1.1" 401 Unauthorized
INFO:     192.168.1.4:60100 - "POST /mcp HTTP/1.1" 401 Unauthorized
INFO:     192.168.1.4:52170 - "POST /mcp HTTP/1.1" 401 Unauthorized
INFO:     192.168.1.4:37372 - "POST /mcp HTTP/1.1" 401 Unauthorized
2026-02-12 10:40:53,722 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 2b39a535682546c882376cfce745b986
2026-02-12 10:40:53,725 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 10:40:53,749 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:43360 - "POST /mcp HTTP/1.1" 200 OK
INFO:     192.168.1.4:43366 - "POST /mcp HTTP/1.1" 202 Accepted
INFO:     192.168.1.4:43378 - "GET /mcp HTTP/1.1" 200 OK
INFO:     192.168.1.4:43380 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 10:40:56,788 - mcp.server.lowlevel.server - INFO - Processing request of type ListResourcesRequest
INFO:     192.168.1.4:45060 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 10:40:59,981 - mcp.server.lowlevel.server - INFO - Processing request of type ListPromptsRequest
INFO:     192.168.1.4:38224 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 10:41:09,529 - mcp.server.lowlevel.server - INFO - Processing request of type ListToolsRequest
INFO:     192.168.1.4:46888 - "GET /mcp HTTP/1.1" 401 Unauthorized
INFO:     192.168.1.4:46898 - "GET /favicon.ico HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:47606 - "GET /mcp HTTP/1.1" 401 Unauthorized
INFO:     192.168.1.4:47618 - "GET /favicon.ico HTTP/1.1" 404 Not Found
2026-02-12 10:44:32,668 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: d45074db18ba4d6f9b39d079aa9c26ec
2026-02-12 10:44:32,670 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 10:44:32,695 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:48324 - "POST /mcp HTTP/1.1" 406 Not Acceptable
2026-02-12 10:44:53,833 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 9a4c7528f2ef4272a0a54232104112bb
2026-02-12 10:44:53,835 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 10:44:53,850 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:56920 - "POST /mcp HTTP/1.1" 200 OK
INFO:     192.168.1.4:56932 - "POST /mcp HTTP/1.1" 202 Accepted
INFO:     192.168.1.4:56942 - "GET /mcp HTTP/1.1" 200 OK
INFO:     192.168.1.4:56948 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 10:44:57,347 - mcp.server.lowlevel.server - INFO - Processing request of type ListResourcesRequest
INFO:     192.168.1.4:56954 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 10:44:59,254 - mcp.server.lowlevel.server - INFO - Processing request of type ListToolsRequest
INFO:     192.168.1.4:55408 - "POST /mcp/build_class_playlist HTTP/1.1" 404 Not Found
INFO:     Shutting down
INFO:     Waiting for connections to close. (CTRL+C to force quit)
ERROR:    ASGI callable returned without completing response.
ERROR:    ASGI callable returned without completing response.
INFO:     Waiting for application shutdown.
2026-02-12 10:49:27,581 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager shutting down
2026-02-12 10:49:27,582 - choreography-mcp - INFO - Database pool closed.
2026-02-12 10:49:27,582 - choreography-mcp - INFO - Database pool closed.
2026-02-12 10:49:27,582 - choreography-mcp - INFO - Database pool closed.
INFO:     Application shutdown complete.
INFO:     Finished server process [756592]
2026-02-12 10:49:28,239 - choreography-mcp - INFO - MCP HTTP auth enabled (Bearer token + scopes=mcp:access).
2026-02-12 10:49:28,243 - mcp.server.lowlevel.server - DEBUG - Initializing server 'choreography-db'
2026-02-12 10:49:28,243 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2026-02-12 10:49:28,243 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2026-02-12 10:49:28,243 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2026-02-12 10:49:28,243 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2026-02-12 10:49:28,243 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2026-02-12 10:49:28,243 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2026-02-12 10:49:28,243 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2026-02-12 10:49:28,258 - mcp.server.fastmcp.resources.resource_manager - DEBUG - Adding resource
2026-02-12 10:49:28,260 - choreography-mcp - INFO - Starting MCP server transport=streamable-http host=0.0.0.0 port=8000
2026-02-12 10:49:28,262 - asyncio - DEBUG - Using selector: EpollSelector
INFO:     Started server process [768162]
INFO:     Waiting for application startup.
2026-02-12 10:49:28,281 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager started
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     192.168.1.4:38722 - "GET /mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:38738 - "GET /mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:45126 - "GET /mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:45128 - "GET /mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:34088 - "POST /mcp/build_class_playlist HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:41968 - "POST /mcp/mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:35152 - "POST /mcp/mcp HTTP/1.1" 404 Not Found
2026-02-12 10:55:51,675 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 10:55:51,676 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 8faf3d044c7d4884b9916b7a928d3b24
2026-02-12 10:55:51,681 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 10:55:51,701 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:35012 - "POST /mcp HTTP/1.1" 406 Not Acceptable
2026-02-12 10:57:13,243 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 10:57:13,244 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 39a1f2390274479f85a1a34692393f8f
2026-02-12 10:57:13,247 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 10:57:13,265 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:56036 - "POST /mcp HTTP/1.1" 400 Bad Request
2026-02-12 10:58:06,977 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 10:58:06,978 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 2e4a01c9bf804d9caf45d4982876fd2a
2026-02-12 10:58:06,979 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 10:58:06,999 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:33018 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 10:58:07,001 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 10:58:07,001 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 10:58:07,001 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 10:58:16,427 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 10:58:16,427 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 257ae88cf5c44da790fc8eb89dec98f9
2026-02-12 10:58:16,428 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 10:58:16,447 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:34702 - "POST /mcp HTTP/1.1" 400 Bad Request
2026-02-12 11:04:03,639 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:04:03,639 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 2989c6b6a93841188b86f3bede9ceacd
2026-02-12 11:04:03,642 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:04:03,665 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:57440 - "POST /mcp HTTP/1.1" 406 Not Acceptable
2026-02-12 11:10:31,543 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:10:31,544 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 06ad7a9bbafe49ef82b3f852774e7b44
2026-02-12 11:10:31,545 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:10:31,562 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:44016 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:10:31,563 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:10:31,563 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:10:31,564 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:10:31,615 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:44026 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:10:31,616 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:10:31,632 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:44036 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:10:31,633 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x784a83f4e0d0>
2026-02-12 11:10:31,633 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:10:31,633 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:10:31,633 - mcp.server.lowlevel.server - DEBUG - Tool cache miss for build_class_playlist, refreshing cache
2026-02-12 11:10:31,666 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:10:31,666 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:10:31,666 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 0,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": \\"Top hits of 1978\\",\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"}],"structuredContent":{"result":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 0,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": \\"Top hits of 1978\\",\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:10:31,667 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:11:22,248 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:11:22,248 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: a0a5c09041a64f5693dec5231c2e83f8
2026-02-12 11:11:22,250 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:11:22,266 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:60502 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:11:22,267 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:11:22,267 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:11:22,268 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:11:22,334 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:60518 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:11:22,335 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:11:22,354 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:60528 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:11:22,355 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x784a84123ce0>
2026-02-12 11:11:22,355 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:11:22,355 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:11:22,392 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:11:22,392 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:11:22,392 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 10.5,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": null,\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": [\\n        {\\n          \\"id\\": 31,\\n          \\"spotify_id\\": \\"0JiY190vktuhSGN6aqJdrt\\",\\n          \\"title\\": \\"So What\\",\\n          \\"artist\\": \\"P!nk\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"climb\\",\\n          \\"duration_minutes\\": 3.59,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/0JiY190vktuhSGN6aqJdrt\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        },\\n        {\\n          \\"id\\": 7,\\n          \\"spotify_id\\": \\"4oc0XA7UehlFOuFz4HHjvn\\",\\n          \\"title\\": \\"Everybody (Backstreet\'s Back) - Radio Edit\\",\\n          \\"artist\\": \\"Backstreet Boys\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"climb\\",\\n          \\"duration_minutes\\": 3.76,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/4oc0XA7UehlFOuFz4HHjvn\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        }\\n      ]\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": [\\n        {\\n          \\"id\\": 38,\\n          \\"spotify_id\\": \\"3xrn9i8zhNZsTtcoWgQEAd\\",\\n          \\"title\\": \\"Since U Been Gone\\",\\n          \\"artist\\": \\"Kelly Clarkson\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"sprint\\",\\n          \\"duration_minutes\\": 3.15,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/3xrn9i8zhNZsTtcoWgQEAd\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        }\\n      ]\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"}],"structuredContent":{"result":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 10.5,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": null,\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": [\\n        {\\n          \\"id\\": 31,\\n          \\"spotify_id\\": \\"0JiY190vktuhSGN6aqJdrt\\",\\n          \\"title\\": \\"So What\\",\\n          \\"artist\\": \\"P!nk\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"climb\\",\\n          \\"duration_minutes\\": 3.59,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/0JiY190vktuhSGN6aqJdrt\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        },\\n        {\\n          \\"id\\": 7,\\n          \\"spotify_id\\": \\"4oc0XA7UehlFOuFz4HHjvn\\",\\n          \\"title\\": \\"Everybody (Backstreet\'s Back) - Radio Edit\\",\\n          \\"artist\\": \\"Backstreet Boys\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"climb\\",\\n          \\"duration_minutes\\": 3.76,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/4oc0XA7UehlFOuFz4HHjvn\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        }\\n      ]\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": [\\n        {\\n          \\"id\\": 38,\\n          \\"spotify_id\\": \\"3xrn9i8zhNZsTtcoWgQEAd\\",\\n          \\"title\\": \\"Since U Been Gone\\",\\n          \\"artist\\": \\"Kelly Clarkson\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"sprint\\",\\n          \\"duration_minutes\\": 3.15,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/3xrn9i8zhNZsTtcoWgQEAd\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        }\\n      ]\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:11:22,393 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2026-02-12 11:18:38,707 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager shutting down
2026-02-12 11:18:38,711 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:18:38,712 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:18:38,713 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:18:38,713 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:18:38,714 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:18:38,714 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:18:38,714 - choreography-mcp - INFO - Database pool closed.
INFO:     Application shutdown complete.
INFO:     Finished server process [768162]
2026-02-12 11:18:39,194 - choreography-mcp - INFO - MCP HTTP auth enabled (Bearer token + scopes=mcp:access).
2026-02-12 11:18:39,198 - mcp.server.lowlevel.server - DEBUG - Initializing server 'choreography-db'
2026-02-12 11:18:39,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2026-02-12 11:18:39,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2026-02-12 11:18:39,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2026-02-12 11:18:39,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2026-02-12 11:18:39,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2026-02-12 11:18:39,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2026-02-12 11:18:39,198 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2026-02-12 11:18:39,211 - mcp.server.fastmcp.resources.resource_manager - DEBUG - Adding resource
2026-02-12 11:18:39,213 - choreography-mcp - INFO - Starting MCP server transport=streamable-http host=0.0.0.0 port=8000
2026-02-12 11:18:39,216 - asyncio - DEBUG - Using selector: EpollSelector
INFO:     Started server process [790167]
INFO:     Waiting for application startup.
2026-02-12 11:18:39,234 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager started
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2026-02-12 11:18:46,169 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:18:46,170 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: bf735b1a66dc4928919c7cc9b34cbaee
2026-02-12 11:18:46,175 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:18:46,201 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:58436 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:18:46,206 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:18:46,206 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:18:46,207 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:18:46,263 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:58440 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:18:46,265 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:18:46,282 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:58452 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:18:46,285 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7e1e97feae90>
2026-02-12 11:18:46,285 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:18:46,285 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:18:46,285 - mcp.server.lowlevel.server - DEBUG - Tool cache miss for build_class_playlist, refreshing cache
2026-02-12 11:18:46,314 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:18:46,315 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:18:46,315 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 10.5,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": null,\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": [\\n        {\\n          \\"id\\": 7,\\n          \\"spotify_id\\": \\"4oc0XA7UehlFOuFz4HHjvn\\",\\n          \\"title\\": \\"Everybody (Backstreet\'s Back) - Radio Edit\\",\\n          \\"artist\\": \\"Backstreet Boys\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"climb\\",\\n          \\"duration_minutes\\": 3.76,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/4oc0XA7UehlFOuFz4HHjvn\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        },\\n        {\\n          \\"id\\": 31,\\n          \\"spotify_id\\": \\"0JiY190vktuhSGN6aqJdrt\\",\\n          \\"title\\": \\"So What\\",\\n          \\"artist\\": \\"P!nk\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"climb\\",\\n          \\"duration_minutes\\": 3.59,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/0JiY190vktuhSGN6aqJdrt\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        }\\n      ]\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": [\\n        {\\n          \\"id\\": 38,\\n          \\"spotify_id\\": \\"3xrn9i8zhNZsTtcoWgQEAd\\",\\n          \\"title\\": \\"Since U Been Gone\\",\\n          \\"artist\\": \\"Kelly Clarkson\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"sprint\\",\\n          \\"duration_minutes\\": 3.15,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/3xrn9i8zhNZsTtcoWgQEAd\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        }\\n      ]\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"}],"structuredContent":{"result":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 10.5,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": null,\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": [\\n        {\\n          \\"id\\": 7,\\n          \\"spotify_id\\": \\"4oc0XA7UehlFOuFz4HHjvn\\",\\n          \\"title\\": \\"Everybody (Backstreet\'s Back) - Radio Edit\\",\\n          \\"artist\\": \\"Backstreet Boys\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"climb\\",\\n          \\"duration_minutes\\": 3.76,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/4oc0XA7UehlFOuFz4HHjvn\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        },\\n        {\\n          \\"id\\": 31,\\n          \\"spotify_id\\": \\"0JiY190vktuhSGN6aqJdrt\\",\\n          \\"title\\": \\"So What\\",\\n          \\"artist\\": \\"P!nk\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"climb\\",\\n          \\"duration_minutes\\": 3.59,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/0JiY190vktuhSGN6aqJdrt\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        }\\n      ]\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": [\\n        {\\n          \\"id\\": 38,\\n          \\"spotify_id\\": \\"3xrn9i8zhNZsTtcoWgQEAd\\",\\n          \\"title\\": \\"Since U Been Gone\\",\\n          \\"artist\\": \\"Kelly Clarkson\\",\\n          \\"bpm\\": null,\\n          \\"intensity\\": \\"medium\\",\\n          \\"track_type\\": \\"sprint\\",\\n          \\"duration_minutes\\": 3.15,\\n          \\"position\\": null,\\n          \\"focus_area\\": null,\\n          \\"resistance_min\\": null,\\n          \\"resistance_max\\": null,\\n          \\"cadence_min\\": null,\\n          \\"cadence_max\\": null,\\n          \\"spotify_url\\": \\"https://open.spotify.com/track/3xrn9i8zhNZsTtcoWgQEAd\\",\\n          \\"thumbs_up\\": 0,\\n          \\"thumbs_down\\": 0\\n        }\\n      ]\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:18:46,315 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
INFO:     192.168.1.4:39996 - "POST /mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:40006 - "DELETE /mcp HTTP/1.1" 404 Not Found
2026-02-12 11:21:38,040 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:21:38,040 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 95f60bafd19b4452b5e3ee7c3234ffef
2026-02-12 11:21:38,043 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:21:38,061 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:40020 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:21:38,063 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:21:38,063 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-11-25","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:21:38,063 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:21:38,077 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:40022 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:21:38,077 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=None, jsonrpc='2.0')
2026-02-12 11:21:38,085 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:40036 - "GET /mcp HTTP/1.1" 200 OK
2026-02-12 11:21:40,633 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:56848 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:21:40,635 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7e1e954255b0>
2026-02-12 11:21:40,635 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:21:40,635 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:21:40,651 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:21:40,651 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:21:40,651 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":1,"result":{"content":[{"type":"text","text":"[\\n  {\\n    \\"name\\": \\"\\\\ud83d\\\\udeb4\\\\u200d\\\\u2640\\\\ufe0f 30-Min 90s Pop vs Rock HIIT Battle\\",\\n    \\"description\\": \\"0\\\\u20135 min: Controlled warm-up with attitude\\\\n\\\\n5\\\\u201312 min: Speed battle\\\\n\\\\n12\\\\u201320 min: Heavy power\\\\n\\\\n20\\\\u201327 min: Peak mixed intervals\\\\n\\\\n27\\\\u201330 min: Controlled descent\\",\\n    \\"theme\\": null,\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": \\"intermediate\\",\\n    \\"total_duration_minutes\\": 21.82,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": null,\\n    \\"track_count\\": 6\\n  },\\n  {\\n    \\"name\\": \\"Decades Down Under: Australia Day Ride Power Revolution\\",\\n    \\"description\\": \\"A 49-minute cycling class featuring Decades Down Under: Australia Day Ride music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Decades Down Under: Australia Day Ride\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 49.75,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"4dBXccGfxF2WS4IBDlbEoz\\",\\n    \\"track_count\\": 12\\n  },\\n  {\\n    \\"name\\": \\"Disco Dudes Power Revolution\\",\\n    \\"description\\": \\"A 33-minute cycling class featuring Disco Dudes music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Disco Dudes\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 28.99,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"71EcQuvSP9wpVs6EgCGHTI\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Empowering,  Anti-Valentines Day Ride Journey\\",\\n    \\"description\\": \\"A 50-minute cycling class combining Empowering,  energy with Anti-Valentines Day Ride vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Anti-Valentines Day Ride\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 50.38,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"5LXatxMJdJI0Z2ktzNnqyq\\",\\n    \\"track_count\\": 13\\n  },\\n  {\\n    \\"name\\": \\"Empowering, up beat, strong 90\'s Rock Adventure\\",\\n    \\"description\\": \\"A 27-minute cycling class combining Empowering, up beat, strong energy with 90\'s Rock vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"90\'s Rock\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 27.5,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"6M9TSICRC04Oi0P8vHKzMZ\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Feel good HITT  Power Journey\\",\\n    \\"description\\": \\"A 33-minute cycling class featuring Feel good HITT  music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Feel good HITT \\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 33.26,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"1Te3mvz5xMjy1NCtj2ipN3\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Fun, Sing-along, High Energy  90\'s One Hit Wonders Odyssey\\",\\n    \\"description\\": \\"A 52-minute cycling class combining Fun, Sing-along, High Energy  energy with 90\'s One Hit Wonders vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"90\'s One Hit Wonders\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 52.3,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"4emWdNfEstaxydlHXfnfX9\\",\\n    \\"track_count\\": 12\\n  },\\n  {\\n    \\"name\\": \\"One-Hit Wonders \\\\u2022 Reverse Timeline (Now \\\\u2192 70s)\\",\\n    \\"description\\": null,\\n    \\"theme\\": \\"Sing-Along \\\\u2022 Uplifting \\\\u2022 Pop Power\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": \\"intermediate\\",\\n    \\"total_duration_minutes\\": 45.88,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"17gvvzj6EsGsdhxlglF7HK\\",\\n    \\"track_count\\": 12\\n  }\\n]"}],"structuredContent":{"result":"[\\n  {\\n    \\"name\\": \\"\\\\ud83d\\\\udeb4\\\\u200d\\\\u2640\\\\ufe0f 30-Min 90s Pop vs Rock HIIT Battle\\",\\n    \\"description\\": \\"0\\\\u20135 min: Controlled warm-up with attitude\\\\n\\\\n5\\\\u201312 min: Speed battle\\\\n\\\\n12\\\\u201320 min: Heavy power\\\\n\\\\n20\\\\u201327 min: Peak mixed intervals\\\\n\\\\n27\\\\u201330 min: Controlled descent\\",\\n    \\"theme\\": null,\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": \\"intermediate\\",\\n    \\"total_duration_minutes\\": 21.82,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": null,\\n    \\"track_count\\": 6\\n  },\\n  {\\n    \\"name\\": \\"Decades Down Under: Australia Day Ride Power Revolution\\",\\n    \\"description\\": \\"A 49-minute cycling class featuring Decades Down Under: Australia Day Ride music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Decades Down Under: Australia Day Ride\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 49.75,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"4dBXccGfxF2WS4IBDlbEoz\\",\\n    \\"track_count\\": 12\\n  },\\n  {\\n    \\"name\\": \\"Disco Dudes Power Revolution\\",\\n    \\"description\\": \\"A 33-minute cycling class featuring Disco Dudes music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Disco Dudes\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 28.99,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"71EcQuvSP9wpVs6EgCGHTI\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Empowering,  Anti-Valentines Day Ride Journey\\",\\n    \\"description\\": \\"A 50-minute cycling class combining Empowering,  energy with Anti-Valentines Day Ride vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Anti-Valentines Day Ride\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 50.38,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"5LXatxMJdJI0Z2ktzNnqyq\\",\\n    \\"track_count\\": 13\\n  },\\n  {\\n    \\"name\\": \\"Empowering, up beat, strong 90\'s Rock Adventure\\",\\n    \\"description\\": \\"A 27-minute cycling class combining Empowering, up beat, strong energy with 90\'s Rock vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"90\'s Rock\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 27.5,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"6M9TSICRC04Oi0P8vHKzMZ\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Feel good HITT  Power Journey\\",\\n    \\"description\\": \\"A 33-minute cycling class featuring Feel good HITT  music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Feel good HITT \\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 33.26,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"1Te3mvz5xMjy1NCtj2ipN3\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Fun, Sing-along, High Energy  90\'s One Hit Wonders Odyssey\\",\\n    \\"description\\": \\"A 52-minute cycling class combining Fun, Sing-along, High Energy  energy with 90\'s One Hit Wonders vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"90\'s One Hit Wonders\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 52.3,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"4emWdNfEstaxydlHXfnfX9\\",\\n    \\"track_count\\": 12\\n  },\\n  {\\n    \\"name\\": \\"One-Hit Wonders \\\\u2022 Reverse Timeline (Now \\\\u2192 70s)\\",\\n    \\"description\\": null,\\n    \\"theme\\": \\"Sing-Along \\\\u2022 Uplifting \\\\u2022 Pop Power\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": \\"intermediate\\",\\n    \\"total_duration_minutes\\": 45.88,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"17gvvzj6EsGsdhxlglF7HK\\",\\n    \\"track_count\\": 12\\n  }\\n]"},"isError":false}}\r\n\r\n'
2026-02-12 11:21:40,651 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:21:44,283 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:56864 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:21:44,284 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7e1e95424c30>
2026-02-12 11:21:44,284 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:21:44,284 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:21:44,303 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:21:44,303 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:21:44,303 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":2,"result":{"content":[{"type":"text","text":"[\\n  {\\n    \\"name\\": \\"\\\\ud83d\\\\udeb4\\\\u200d\\\\u2640\\\\ufe0f 30-Min 90s Pop vs Rock HIIT Battle\\",\\n    \\"description\\": \\"0\\\\u20135 min: Controlled warm-up with attitude\\\\n\\\\n5\\\\u201312 min: Speed battle\\\\n\\\\n12\\\\u201320 min: Heavy power\\\\n\\\\n20\\\\u201327 min: Peak mixed intervals\\\\n\\\\n27\\\\u201330 min: Controlled descent\\",\\n    \\"theme\\": null,\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": \\"intermediate\\",\\n    \\"total_duration_minutes\\": 21.82,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": null,\\n    \\"track_count\\": 6\\n  },\\n  {\\n    \\"name\\": \\"Decades Down Under: Australia Day Ride Power Revolution\\",\\n    \\"description\\": \\"A 49-minute cycling class featuring Decades Down Under: Australia Day Ride music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Decades Down Under: Australia Day Ride\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 49.75,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"4dBXccGfxF2WS4IBDlbEoz\\",\\n    \\"track_count\\": 12\\n  },\\n  {\\n    \\"name\\": \\"Disco Dudes Power Revolution\\",\\n    \\"description\\": \\"A 33-minute cycling class featuring Disco Dudes music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Disco Dudes\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 28.99,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"71EcQuvSP9wpVs6EgCGHTI\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Empowering,  Anti-Valentines Day Ride Journey\\",\\n    \\"description\\": \\"A 50-minute cycling class combining Empowering,  energy with Anti-Valentines Day Ride vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Anti-Valentines Day Ride\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 50.38,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"5LXatxMJdJI0Z2ktzNnqyq\\",\\n    \\"track_count\\": 13\\n  },\\n  {\\n    \\"name\\": \\"Empowering, up beat, strong 90\'s Rock Adventure\\",\\n    \\"description\\": \\"A 27-minute cycling class combining Empowering, up beat, strong energy with 90\'s Rock vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"90\'s Rock\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 27.5,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"6M9TSICRC04Oi0P8vHKzMZ\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Feel good HITT  Power Journey\\",\\n    \\"description\\": \\"A 33-minute cycling class featuring Feel good HITT  music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Feel good HITT \\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 33.26,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"1Te3mvz5xMjy1NCtj2ipN3\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Fun, Sing-along, High Energy  90\'s One Hit Wonders Odyssey\\",\\n    \\"description\\": \\"A 52-minute cycling class combining Fun, Sing-along, High Energy  energy with 90\'s One Hit Wonders vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"90\'s One Hit Wonders\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 52.3,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"4emWdNfEstaxydlHXfnfX9\\",\\n    \\"track_count\\": 12\\n  },\\n  {\\n    \\"name\\": \\"One-Hit Wonders \\\\u2022 Reverse Timeline (Now \\\\u2192 70s)\\",\\n    \\"description\\": null,\\n    \\"theme\\": \\"Sing-Along \\\\u2022 Uplifting \\\\u2022 Pop Power\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": \\"intermediate\\",\\n    \\"total_duration_minutes\\": 45.88,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"17gvvzj6EsGsdhxlglF7HK\\",\\n    \\"track_count\\": 12\\n  }\\n]"}],"structuredContent":{"result":"[\\n  {\\n    \\"name\\": \\"\\\\ud83d\\\\udeb4\\\\u200d\\\\u2640\\\\ufe0f 30-Min 90s Pop vs Rock HIIT Battle\\",\\n    \\"description\\": \\"0\\\\u20135 min: Controlled warm-up with attitude\\\\n\\\\n5\\\\u201312 min: Speed battle\\\\n\\\\n12\\\\u201320 min: Heavy power\\\\n\\\\n20\\\\u201327 min: Peak mixed intervals\\\\n\\\\n27\\\\u201330 min: Controlled descent\\",\\n    \\"theme\\": null,\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": \\"intermediate\\",\\n    \\"total_duration_minutes\\": 21.82,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": null,\\n    \\"track_count\\": 6\\n  },\\n  {\\n    \\"name\\": \\"Decades Down Under: Australia Day Ride Power Revolution\\",\\n    \\"description\\": \\"A 49-minute cycling class featuring Decades Down Under: Australia Day Ride music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Decades Down Under: Australia Day Ride\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 49.75,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"4dBXccGfxF2WS4IBDlbEoz\\",\\n    \\"track_count\\": 12\\n  },\\n  {\\n    \\"name\\": \\"Disco Dudes Power Revolution\\",\\n    \\"description\\": \\"A 33-minute cycling class featuring Disco Dudes music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Disco Dudes\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 28.99,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"71EcQuvSP9wpVs6EgCGHTI\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Empowering,  Anti-Valentines Day Ride Journey\\",\\n    \\"description\\": \\"A 50-minute cycling class combining Empowering,  energy with Anti-Valentines Day Ride vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Anti-Valentines Day Ride\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 50.38,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"5LXatxMJdJI0Z2ktzNnqyq\\",\\n    \\"track_count\\": 13\\n  },\\n  {\\n    \\"name\\": \\"Empowering, up beat, strong 90\'s Rock Adventure\\",\\n    \\"description\\": \\"A 27-minute cycling class combining Empowering, up beat, strong energy with 90\'s Rock vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"90\'s Rock\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 27.5,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"6M9TSICRC04Oi0P8vHKzMZ\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Feel good HITT  Power Journey\\",\\n    \\"description\\": \\"A 33-minute cycling class featuring Feel good HITT  music. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"Feel good HITT \\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 33.26,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"1Te3mvz5xMjy1NCtj2ipN3\\",\\n    \\"track_count\\": 7\\n  },\\n  {\\n    \\"name\\": \\"Fun, Sing-along, High Energy  90\'s One Hit Wonders Odyssey\\",\\n    \\"description\\": \\"A 52-minute cycling class combining Fun, Sing-along, High Energy  energy with 90\'s One Hit Wonders vibes. Designed for an energizing and engaging ride.\\",\\n    \\"theme\\": \\"90\'s One Hit Wonders\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": null,\\n    \\"total_duration_minutes\\": 52.3,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"4emWdNfEstaxydlHXfnfX9\\",\\n    \\"track_count\\": 12\\n  },\\n  {\\n    \\"name\\": \\"One-Hit Wonders \\\\u2022 Reverse Timeline (Now \\\\u2192 70s)\\",\\n    \\"description\\": null,\\n    \\"theme\\": \\"Sing-Along \\\\u2022 Uplifting \\\\u2022 Pop Power\\",\\n    \\"intensity_arc\\": null,\\n    \\"difficulty\\": \\"intermediate\\",\\n    \\"total_duration_minutes\\": 45.88,\\n    \\"class_summary\\": null,\\n    \\"tags\\": null,\\n    \\"spotify_playlist_id\\": \\"17gvvzj6EsGsdhxlglF7HK\\",\\n    \\"track_count\\": 12\\n  }\\n]"},"isError":false}}\r\n\r\n'
2026-02-12 11:21:44,304 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:21:53,086 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:21:53.086209+00:00\r\n\r\n'
2026-02-12 11:22:08,087 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:22:08.087778+00:00\r\n\r\n'
2026-02-12 11:22:17,869 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:37940 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:22:17,871 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7e1e95421eb0>
2026-02-12 11:22:17,871 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:22:17,871 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:22:17,881 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:22:17,881 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:22:17,881 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":3,"result":{"content":[{"type":"text","text":"[\\n  {\\n    \\"id\\": 16,\\n    \\"spotify_id\\": \\"6Uy6K3KdmUdAfelUp0SeXn\\",\\n    \\"title\\": \\"Brave\\",\\n    \\"artist\\": \\"Sara Bareilles\\",\\n    \\"bpm\\": null,\\n    \\"intensity\\": \\"low\\",\\n    \\"track_type\\": \\"warmup\\",\\n    \\"duration_minutes\\": 3.67,\\n    \\"position\\": null,\\n    \\"focus_area\\": null,\\n    \\"resistance_min\\": null,\\n    \\"resistance_max\\": null,\\n    \\"cadence_min\\": null,\\n    \\"cadence_max\\": null,\\n    \\"spotify_url\\": \\"https://open.spotify.com/track/6Uy6K3KdmUdAfelUp0SeXn\\",\\n    \\"thumbs_up\\": 0,\\n    \\"thumbs_down\\": 0\\n  },\\n  {\\n    \\"id\\": 40,\\n    \\"spotify_id\\": \\"7DSAEUvxU8FajXtRloy8M0\\",\\n    \\"title\\": \\"Flowers\\",\\n    \\"artist\\": \\"Miley Cyrus\\",\\n    \\"bpm\\": null,\\n    \\"intensity\\": \\"low\\",\\n    \\"track_type\\": \\"warmup\\",\\n    \\"duration_minutes\\": 3.34,\\n    \\"position\\": null,\\n    \\"focus_area\\": null,\\n    \\"resistance_min\\": null,\\n    \\"resistance_max\\": null,\\n    \\"cadence_min\\": null,\\n    \\"cadence_max\\": null,\\n    \\"spotify_url\\": \\"https://open.spotify.com/track/7DSAEUvxU8FajXtRloy8M0\\",\\n    \\"thumbs_up\\": 0,\\n    \\"thumbs_down\\": 0\\n  },\\n  {\\n    \\"id\\": 15,\\n    \\"spotify_id\\": \\"5ghIJDpPoe3CfHMGu71E6T\\",\\n    \\"title\\": \\"Smells Like Teen Spirit\\",\\n    \\"artist\\": \\"Nirvana\\",\\n    \\"bpm\\": 117.0,\\n    \\"intensity\\": \\"low\\",\\n    \\"track_type\\": \\"warmup\\",\\n    \\"duration_minutes\\": 5.03,\\n    \\"position\\": null,\\n    \\"focus_area\\": null,\\n    \\"resistance_min\\": null,\\n    \\"resistance_max\\": null,\\n    \\"cadence_min\\": null,\\n    \\"cadence_max\\": null,\\n    \\"spotify_url\\": \\"https://open.spotify.com/track/5ghIJDpPoe3CfHMGu71E6T\\",\\n    \\"thumbs_up\\": 0,\\n    \\"thumbs_down\\": 0\\n  }\\n]"}],"structuredContent":{"result":"[\\n  {\\n    \\"id\\": 16,\\n    \\"spotify_id\\": \\"6Uy6K3KdmUdAfelUp0SeXn\\",\\n    \\"title\\": \\"Brave\\",\\n    \\"artist\\": \\"Sara Bareilles\\",\\n    \\"bpm\\": null,\\n    \\"intensity\\": \\"low\\",\\n    \\"track_type\\": \\"warmup\\",\\n    \\"duration_minutes\\": 3.67,\\n    \\"position\\": null,\\n    \\"focus_area\\": null,\\n    \\"resistance_min\\": null,\\n    \\"resistance_max\\": null,\\n    \\"cadence_min\\": null,\\n    \\"cadence_max\\": null,\\n    \\"spotify_url\\": \\"https://open.spotify.com/track/6Uy6K3KdmUdAfelUp0SeXn\\",\\n    \\"thumbs_up\\": 0,\\n    \\"thumbs_down\\": 0\\n  },\\n  {\\n    \\"id\\": 40,\\n    \\"spotify_id\\": \\"7DSAEUvxU8FajXtRloy8M0\\",\\n    \\"title\\": \\"Flowers\\",\\n    \\"artist\\": \\"Miley Cyrus\\",\\n    \\"bpm\\": null,\\n    \\"intensity\\": \\"low\\",\\n    \\"track_type\\": \\"warmup\\",\\n    \\"duration_minutes\\": 3.34,\\n    \\"position\\": null,\\n    \\"focus_area\\": null,\\n    \\"resistance_min\\": null,\\n    \\"resistance_max\\": null,\\n    \\"cadence_min\\": null,\\n    \\"cadence_max\\": null,\\n    \\"spotify_url\\": \\"https://open.spotify.com/track/7DSAEUvxU8FajXtRloy8M0\\",\\n    \\"thumbs_up\\": 0,\\n    \\"thumbs_down\\": 0\\n  },\\n  {\\n    \\"id\\": 15,\\n    \\"spotify_id\\": \\"5ghIJDpPoe3CfHMGu71E6T\\",\\n    \\"title\\": \\"Smells Like Teen Spirit\\",\\n    \\"artist\\": \\"Nirvana\\",\\n    \\"bpm\\": 117.0,\\n    \\"intensity\\": \\"low\\",\\n    \\"track_type\\": \\"warmup\\",\\n    \\"duration_minutes\\": 5.03,\\n    \\"position\\": null,\\n    \\"focus_area\\": null,\\n    \\"resistance_min\\": null,\\n    \\"resistance_max\\": null,\\n    \\"cadence_min\\": null,\\n    \\"cadence_max\\": null,\\n    \\"spotify_url\\": \\"https://open.spotify.com/track/5ghIJDpPoe3CfHMGu71E6T\\",\\n    \\"thumbs_up\\": 0,\\n    \\"thumbs_down\\": 0\\n  }\\n]"},"isError":false}}\r\n\r\n'
2026-02-12 11:22:17,882 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:22:23,088 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:22:23.088833+00:00\r\n\r\n'
2026-02-12 11:22:38,089 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:22:38.089850+00:00\r\n\r\n'
2026-02-12 11:22:53,091 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:22:53.091101+00:00\r\n\r\n'
2026-02-12 11:23:08,092 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:23:08.092108+00:00\r\n\r\n'
2026-02-12 11:23:23,093 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:23:23.093147+00:00\r\n\r\n'
2026-02-12 11:23:38,094 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:23:38.094273+00:00\r\n\r\n'
INFO:     Shutting down
INFO:     Waiting for connections to close. (CTRL+C to force quit)
2026-02-12 11:23:41,036 - mcp.server.streamable_http - DEBUG - Closing standalone SSE writer
ERROR:    ASGI callable returned without completing response.
INFO:     Waiting for application shutdown.
2026-02-12 11:23:41,112 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager shutting down
2026-02-12 11:23:41,113 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:23:41,114 - choreography-mcp - INFO - Database pool closed.
INFO:     Application shutdown complete.
INFO:     Finished server process [790167]
2026-02-12 11:23:41,569 - choreography-mcp - INFO - MCP HTTP auth enabled (Bearer token + scopes=mcp:access).
2026-02-12 11:23:41,573 - mcp.server.lowlevel.server - DEBUG - Initializing server 'choreography-db'
2026-02-12 11:23:41,573 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2026-02-12 11:23:41,573 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2026-02-12 11:23:41,573 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2026-02-12 11:23:41,573 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2026-02-12 11:23:41,573 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2026-02-12 11:23:41,573 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2026-02-12 11:23:41,573 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2026-02-12 11:23:41,588 - mcp.server.fastmcp.resources.resource_manager - DEBUG - Adding resource
2026-02-12 11:23:41,590 - choreography-mcp - INFO - Starting MCP server transport=streamable-http host=0.0.0.0 port=8000
2026-02-12 11:23:41,593 - asyncio - DEBUG - Using selector: EpollSelector
INFO:     Started server process [794174]
INFO:     Waiting for application startup.
2026-02-12 11:23:41,612 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager started
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     192.168.1.4:39572 - "GET /mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:39578 - "GET /mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:44152 - "POST /mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:44162 - "POST /mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:44166 - "DELETE /mcp HTTP/1.1" 404 Not Found
2026-02-12 11:24:06,932 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:24:06,932 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 3f51a63100904e3aad88312a2950e6d5
2026-02-12 11:24:06,935 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:24:06,958 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:44172 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:24:06,960 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:24:06,960 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-11-25","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:24:06,960 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:24:06,979 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:44174 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:24:06,981 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=None, jsonrpc='2.0')
2026-02-12 11:24:06,992 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:44182 - "GET /mcp HTTP/1.1" 200 OK
2026-02-12 11:24:07,016 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:44184 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:24:07,017 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7df4c9070410>
2026-02-12 11:24:07,017 - mcp.server.lowlevel.server - INFO - Processing request of type ListToolsRequest
2026-02-12 11:24:07,017 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type ListToolsRequest
2026-02-12 11:24:07,017 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:24:07,017 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:24:07,017 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":1,"result":{"tools":[{"name":"search_tracks","description":"Search for tracks by musical and cycling criteria.\\n\\nUse this to find tracks matching specific BPM ranges, intensity levels,\\ntrack types (warmup, climb, sprint, etc.), riding positions, or artists.\\nThe keyword parameter searches across title, artist, album, and notes.\\n\\nArgs:\\n    bpm_min: Minimum BPM (e.g. 100)\\n    bpm_max: Maximum BPM (e.g. 140)\\n    intensity: Filter by intensity level (low, medium, high, extreme)\\n    track_type: Filter by track type (warmup, climb, sprint, recovery, cooldown, intervals, endurance)\\n    position: Filter by riding position\\n    artist: Filter by artist name (partial match)\\n    focus_area: Filter by focus area (e.g. endurance, strength)\\n    keyword: Search across title, artist, album, and notes\\n    limit: Maximum results to return (default 20)\\n","inputSchema":{"properties":{"bpm_min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Min"},"bpm_max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Max"},"intensity":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Intensity"},"track_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Track Type"},"position":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Position"},"artist":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Artist"},"focus_area":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Focus Area"},"keyword":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Keyword"},"limit":{"default":20,"title":"Limit","type":"integer"}},"title":"search_tracksArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"search_tracksOutput","type":"object"}},{"name":"suggest_tracks_for_slot","description":"Suggest the best tracks for a specific slot in a cycling class.\\n\\nGiven a slot type (warmup, climb, sprint, recovery, cooldown, intervals,\\nendurance), returns matching tracks ranked by feedback rating.\\nWhen audience is specified, tracks rated thumbs-down for that audience\\nare deprioritized, and thumbs-up tracks are boosted.\\n\\nArgs:\\n    slot_type: The class slot type (warmup, climb, sprint, recovery, cooldown, intervals, endurance)\\n    duration_min: Minimum track duration in minutes\\n    duration_max: Maximum track duration in minutes\\n    intensity: Preferred intensity (low, medium, high, extreme)\\n    bpm_min: Minimum BPM\\n    bpm_max: Maximum BPM\\n    exclude_titles: Comma-separated track titles to exclude (already in playlist)\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\') - filters out tracks rated down for this audience\\n    prefer_top_rated: Rank tracks with thumbs-up feedback higher (default true)\\n    limit: Maximum results (default 10)\\n","inputSchema":{"properties":{"slot_type":{"title":"Slot Type","type":"string"},"duration_min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Duration Min"},"duration_max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Duration Max"},"intensity":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Intensity"},"bpm_min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Min"},"bpm_max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Max"},"exclude_titles":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Exclude Titles"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"},"prefer_top_rated":{"default":true,"title":"Prefer Top Rated","type":"boolean"},"limit":{"default":10,"title":"Limit","type":"integer"}},"required":["slot_type"],"title":"suggest_tracks_for_slotArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"suggest_tracks_for_slotOutput","type":"object"}},{"name":"find_similar_tracks","description":"Find tracks similar to a given track based on BPM, intensity, and type.\\n\\nUseful for finding alternatives or substitutions for a track in a class.\\n\\nArgs:\\n    track_title: The title of the reference track\\n    bpm_tolerance: How close the BPM should be (default 15)\\n    limit: Maximum results (default 10)\\n","inputSchema":{"properties":{"track_title":{"title":"Track Title","type":"string"},"bpm_tolerance":{"default":15,"title":"Bpm Tolerance","type":"number"},"limit":{"default":10,"title":"Limit","type":"integer"}},"required":["track_title"],"title":"find_similar_tracksArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"find_similar_tracksOutput","type":"object"}},{"name":"get_track_details","description":"Get full details of a track including choreography cues.\\n\\nReturns all information about a track: metadata, cycling parameters,\\nchoreography breakdown, coaching cues, and notes.\\n\\nArgs:\\n    track_title: The title of the track (partial match supported)\\n","inputSchema":{"properties":{"track_title":{"title":"Track Title","type":"string"}},"required":["track_title"],"title":"get_track_detailsArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"get_track_detailsOutput","type":"object"}},{"name":"get_top_rated_tracks","description":"Get tracks with the best feedback ratings.\\n\\nShows tracks ranked by number of thumbs-up (or thumbs-down) ratings,\\noptionally filtered by usage context and/or audience demographic.\\n\\nArgs:\\n    context: Filter by usage context (e.g. warmup, climb, sprint)\\n    audience: Filter by audience demographic (e.g. \'50+\', \'mixed\', \'young\')\\n    rating: Rating type to rank by - \'up\' or \'down\' (default \'up\')\\n    limit: Maximum results (default 15)\\n","inputSchema":{"properties":{"context":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Context"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"},"rating":{"default":"up","title":"Rating","type":"string"},"limit":{"default":15,"title":"Limit","type":"integer"}},"title":"get_top_rated_tracksArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"get_top_rated_tracksOutput","type":"object"}},{"name":"get_feedback_summary","description":"Get a summary of all track feedback grouped by context and rating.\\n\\nReturns an overview of how many tracks have been rated up/down\\nin each context (warmup, climb, sprint, etc.), plus overall stats.\\n","inputSchema":{"properties":{},"title":"get_feedback_summaryArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"get_feedback_summaryOutput","type":"object"}},{"name":"build_class_playlist","description":"Build a suggested cycling class playlist with a proper workout arc.\\n\\nGenerates a class structure with tracks for each phase:\\nwarmup \xe2\x86\x92 building \xe2\x86\x92 peak (climbs/sprints/intervals) \xe2\x86\x92 recovery \xe2\x86\x92 cooldown.\\nPrefers top-rated tracks and avoids duplicates.\\nWhen audience is specified, tracks rated thumbs-down for that audience are excluded.\\n\\nArgs:\\n    duration_minutes: Target class duration in minutes (default 45)\\n    difficulty: Preferred difficulty - affects intensity selection\\n    theme: Optional theme or focus (e.g. \'climb heavy\', \'high energy\', \'endurance\')\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\') - excludes tracks rated down for this audience\\n","inputSchema":{"properties":{"duration_minutes":{"default":45,"title":"Duration Minutes","type":"integer"},"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Difficulty"},"theme":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Theme"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"}},"title":"build_class_playlistArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"build_class_playlistOutput","type":"object"}},{"name":"build_hybrid_playlist","description":"Build a full playlist using DB anchors plus OpenAI gap-fill suggestions.\\n\\nThis tool:\\n1) Builds a base playlist from local DB tracks.\\n2) Applies feedback filters to remove disliked tracks/artists.\\n3) Uses OpenAI to suggest additional tracks only when DB coverage is short.\\n4) Returns a merged, ordered playlist.\\n","inputSchema":{"properties":{"duration_minutes":{"default":45,"title":"Duration Minutes","type":"integer"},"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Difficulty"},"theme":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Theme"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"},"target_tracks":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"title":"Target Tracks"}},"title":"build_hybrid_playlistArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"build_hybrid_playlistOutput","type":"object"}},{"name":"list_routines","description":"List existing cycling routines/classes with their track counts.\\n\\nShows saved routines from base44 with key metadata.\\n\\nArgs:\\n    difficulty: Filter by difficulty (beginner, intermediate, advanced, expert)\\n    limit: Maximum results (default 20)\\n","inputSchema":{"properties":{"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Difficulty"},"limit":{"default":20,"title":"Limit","type":"integer"}},"title":"list_routinesArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"list_routinesOutput","type":"object"}},{"name":"rate_track","description":"Rate a track with thumbs up or down. Saves to local database AND syncs to base44.\\n\\nUse this after reviewing a track suggestion to record whether it\'s a good\\nfit. Ratings influence future suggestions - thumbs-up tracks get prioritized.\\n\\nArgs:\\n    track_title: The exact title of the track to rate\\n    rating: \'up\' for thumbs up, \'down\' for thumbs down\\n    context: Usage context (e.g. warmup, climb, sprint, recovery, cooldown)\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\')\\n","inputSchema":{"properties":{"track_title":{"title":"Track Title","type":"string"},"rating":{"title":"Rating","type":"string"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Context"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"}},"required":["track_title","rating"],"title":"rate_trackArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"rate_trackOutput","type":"object"}}]}}\r\n\r\n'
2026-02-12 11:24:07,018 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:24:09,859 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:38682 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:24:09,861 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7df4c9070550>
2026-02-12 11:24:09,861 - mcp.server.lowlevel.server - INFO - Processing request of type ListToolsRequest
2026-02-12 11:24:09,861 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type ListToolsRequest
2026-02-12 11:24:09,862 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:24:09,862 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:24:09,862 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":2,"result":{"tools":[{"name":"search_tracks","description":"Search for tracks by musical and cycling criteria.\\n\\nUse this to find tracks matching specific BPM ranges, intensity levels,\\ntrack types (warmup, climb, sprint, etc.), riding positions, or artists.\\nThe keyword parameter searches across title, artist, album, and notes.\\n\\nArgs:\\n    bpm_min: Minimum BPM (e.g. 100)\\n    bpm_max: Maximum BPM (e.g. 140)\\n    intensity: Filter by intensity level (low, medium, high, extreme)\\n    track_type: Filter by track type (warmup, climb, sprint, recovery, cooldown, intervals, endurance)\\n    position: Filter by riding position\\n    artist: Filter by artist name (partial match)\\n    focus_area: Filter by focus area (e.g. endurance, strength)\\n    keyword: Search across title, artist, album, and notes\\n    limit: Maximum results to return (default 20)\\n","inputSchema":{"properties":{"bpm_min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Min"},"bpm_max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Max"},"intensity":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Intensity"},"track_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Track Type"},"position":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Position"},"artist":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Artist"},"focus_area":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Focus Area"},"keyword":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Keyword"},"limit":{"default":20,"title":"Limit","type":"integer"}},"title":"search_tracksArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"search_tracksOutput","type":"object"}},{"name":"suggest_tracks_for_slot","description":"Suggest the best tracks for a specific slot in a cycling class.\\n\\nGiven a slot type (warmup, climb, sprint, recovery, cooldown, intervals,\\nendurance), returns matching tracks ranked by feedback rating.\\nWhen audience is specified, tracks rated thumbs-down for that audience\\nare deprioritized, and thumbs-up tracks are boosted.\\n\\nArgs:\\n    slot_type: The class slot type (warmup, climb, sprint, recovery, cooldown, intervals, endurance)\\n    duration_min: Minimum track duration in minutes\\n    duration_max: Maximum track duration in minutes\\n    intensity: Preferred intensity (low, medium, high, extreme)\\n    bpm_min: Minimum BPM\\n    bpm_max: Maximum BPM\\n    exclude_titles: Comma-separated track titles to exclude (already in playlist)\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\') - filters out tracks rated down for this audience\\n    prefer_top_rated: Rank tracks with thumbs-up feedback higher (default true)\\n    limit: Maximum results (default 10)\\n","inputSchema":{"properties":{"slot_type":{"title":"Slot Type","type":"string"},"duration_min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Duration Min"},"duration_max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Duration Max"},"intensity":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Intensity"},"bpm_min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Min"},"bpm_max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Max"},"exclude_titles":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Exclude Titles"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"},"prefer_top_rated":{"default":true,"title":"Prefer Top Rated","type":"boolean"},"limit":{"default":10,"title":"Limit","type":"integer"}},"required":["slot_type"],"title":"suggest_tracks_for_slotArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"suggest_tracks_for_slotOutput","type":"object"}},{"name":"find_similar_tracks","description":"Find tracks similar to a given track based on BPM, intensity, and type.\\n\\nUseful for finding alternatives or substitutions for a track in a class.\\n\\nArgs:\\n    track_title: The title of the reference track\\n    bpm_tolerance: How close the BPM should be (default 15)\\n    limit: Maximum results (default 10)\\n","inputSchema":{"properties":{"track_title":{"title":"Track Title","type":"string"},"bpm_tolerance":{"default":15,"title":"Bpm Tolerance","type":"number"},"limit":{"default":10,"title":"Limit","type":"integer"}},"required":["track_title"],"title":"find_similar_tracksArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"find_similar_tracksOutput","type":"object"}},{"name":"get_track_details","description":"Get full details of a track including choreography cues.\\n\\nReturns all information about a track: metadata, cycling parameters,\\nchoreography breakdown, coaching cues, and notes.\\n\\nArgs:\\n    track_title: The title of the track (partial match supported)\\n","inputSchema":{"properties":{"track_title":{"title":"Track Title","type":"string"}},"required":["track_title"],"title":"get_track_detailsArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"get_track_detailsOutput","type":"object"}},{"name":"get_top_rated_tracks","description":"Get tracks with the best feedback ratings.\\n\\nShows tracks ranked by number of thumbs-up (or thumbs-down) ratings,\\noptionally filtered by usage context and/or audience demographic.\\n\\nArgs:\\n    context: Filter by usage context (e.g. warmup, climb, sprint)\\n    audience: Filter by audience demographic (e.g. \'50+\', \'mixed\', \'young\')\\n    rating: Rating type to rank by - \'up\' or \'down\' (default \'up\')\\n    limit: Maximum results (default 15)\\n","inputSchema":{"properties":{"context":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Context"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"},"rating":{"default":"up","title":"Rating","type":"string"},"limit":{"default":15,"title":"Limit","type":"integer"}},"title":"get_top_rated_tracksArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"get_top_rated_tracksOutput","type":"object"}},{"name":"get_feedback_summary","description":"Get a summary of all track feedback grouped by context and rating.\\n\\nReturns an overview of how many tracks have been rated up/down\\nin each context (warmup, climb, sprint, etc.), plus overall stats.\\n","inputSchema":{"properties":{},"title":"get_feedback_summaryArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"get_feedback_summaryOutput","type":"object"}},{"name":"build_class_playlist","description":"Build a suggested cycling class playlist with a proper workout arc.\\n\\nGenerates a class structure with tracks for each phase:\\nwarmup \xe2\x86\x92 building \xe2\x86\x92 peak (climbs/sprints/intervals) \xe2\x86\x92 recovery \xe2\x86\x92 cooldown.\\nPrefers top-rated tracks and avoids duplicates.\\nWhen audience is specified, tracks rated thumbs-down for that audience are excluded.\\n\\nArgs:\\n    duration_minutes: Target class duration in minutes (default 45)\\n    difficulty: Preferred difficulty - affects intensity selection\\n    theme: Optional theme or focus (e.g. \'climb heavy\', \'high energy\', \'endurance\')\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\') - excludes tracks rated down for this audience\\n","inputSchema":{"properties":{"duration_minutes":{"default":45,"title":"Duration Minutes","type":"integer"},"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Difficulty"},"theme":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Theme"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"}},"title":"build_class_playlistArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"build_class_playlistOutput","type":"object"}},{"name":"build_hybrid_playlist","description":"Build a full playlist using DB anchors plus OpenAI gap-fill suggestions.\\n\\nThis tool:\\n1) Builds a base playlist from local DB tracks.\\n2) Applies feedback filters to remove disliked tracks/artists.\\n3) Uses OpenAI to suggest additional tracks only when DB coverage is short.\\n4) Returns a merged, ordered playlist.\\n","inputSchema":{"properties":{"duration_minutes":{"default":45,"title":"Duration Minutes","type":"integer"},"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Difficulty"},"theme":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Theme"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"},"target_tracks":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"title":"Target Tracks"}},"title":"build_hybrid_playlistArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"build_hybrid_playlistOutput","type":"object"}},{"name":"list_routines","description":"List existing cycling routines/classes with their track counts.\\n\\nShows saved routines from base44 with key metadata.\\n\\nArgs:\\n    difficulty: Filter by difficulty (beginner, intermediate, advanced, expert)\\n    limit: Maximum results (default 20)\\n","inputSchema":{"properties":{"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Difficulty"},"limit":{"default":20,"title":"Limit","type":"integer"}},"title":"list_routinesArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"list_routinesOutput","type":"object"}},{"name":"rate_track","description":"Rate a track with thumbs up or down. Saves to local database AND syncs to base44.\\n\\nUse this after reviewing a track suggestion to record whether it\'s a good\\nfit. Ratings influence future suggestions - thumbs-up tracks get prioritized.\\n\\nArgs:\\n    track_title: The exact title of the track to rate\\n    rating: \'up\' for thumbs up, \'down\' for thumbs down\\n    context: Usage context (e.g. warmup, climb, sprint, recovery, cooldown)\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\')\\n","inputSchema":{"properties":{"track_title":{"title":"Track Title","type":"string"},"rating":{"title":"Rating","type":"string"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Context"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"}},"required":["track_title","rating"],"title":"rate_trackArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"rate_trackOutput","type":"object"}}]}}\r\n\r\n'
2026-02-12 11:24:09,862 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:24:17,337 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:38690 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:24:17,338 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7df4c9045810>
2026-02-12 11:24:17,338 - mcp.server.lowlevel.server - INFO - Processing request of type ListPromptsRequest
2026-02-12 11:24:17,338 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type ListPromptsRequest
2026-02-12 11:24:17,338 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:24:17,338 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:24:17,339 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":3,"result":{"prompts":[{"name":"build_class","description":"Template prompt for building a cycling class playlist.\\n\\nArgs:\\n    duration: Target duration in minutes\\n    difficulty: Difficulty level (beginner, intermediate, advanced, expert)\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\')\\n","arguments":[{"name":"duration","required":false},{"name":"difficulty","required":false},{"name":"audience","required":false}]}]}}\r\n\r\n'
2026-02-12 11:24:17,339 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:24:21,993 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:24:21.993154+00:00\r\n\r\n'
2026-02-12 11:24:36,995 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:24:36.995010+00:00\r\n\r\n'
2026-02-12 11:24:39,492 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:42884 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:24:39,493 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7df4c9045940>
2026-02-12 11:24:39,493 - mcp.server.lowlevel.server - INFO - Processing request of type GetPromptRequest
2026-02-12 11:24:39,493 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type GetPromptRequest
2026-02-12 11:24:39,493 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:24:39,494 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:24:39,494 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":4,"result":{"description":"Template prompt for building a cycling class playlist.\\n\\nArgs:\\n    duration: Target duration in minutes\\n    difficulty: Difficulty level (beginner, intermediate, advanced, expert)\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\')\\n","messages":[{"role":"user","content":{"type":"text","text":"Help me build a 45-minute cycling class at Easy difficulty for a 50+ audience.\\n\\nPlease follow these steps:\\n1. First, use the track_stats resource to understand what tracks are available\\n2. Use build_class_playlist with audience=\'50+\' to generate an initial playlist suggestion\\n3. Review the suggestions and use suggest_tracks_for_slot with audience=\'50+\' to find alternatives if any slot needs improvement\\n4. Check get_top_rated_tracks with audience=\'50+\' to see if any highly-rated tracks were missed\\n5. Present the final playlist in order with:\\n   - Phase/slot name\\n   - Track title and artist\\n   - BPM and intensity\\n   - Duration\\n   - Any relevant choreography notes\\n6. After presenting the playlist, ask if I want to rate any tracks with thumbs up/down using rate_track (with audience=\'50+\')\\n\\nConsider:\\n- Smooth BPM transitions between consecutive tracks\\n- Proper intensity arc (build up \xe2\x86\x92 peak \xe2\x86\x92 recover \xe2\x86\x92 peak \xe2\x86\x92 cool down)\\n- Mix of positions and resistance levels for variety\\n- Prefer tracks with positive feedback ratings\\n- Exclude tracks previously rated thumbs-down for this audience\\n- Songs that resonate with a 50+ demographic\\n"}}]}}\r\n\r\n'
2026-02-12 11:24:39,496 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:24:51,996 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:24:51.996650+00:00\r\n\r\n'
2026-02-12 11:25:06,167 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:44956 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:25:06,169 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7df4c9061b50>
2026-02-12 11:25:06,169 - mcp.server.lowlevel.server - INFO - Processing request of type GetPromptRequest
2026-02-12 11:25:06,169 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type GetPromptRequest
2026-02-12 11:25:06,170 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:25:06,170 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:25:06,170 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":5,"result":{"description":"Template prompt for building a cycling class playlist.\\n\\nArgs:\\n    duration: Target duration in minutes\\n    difficulty: Difficulty level (beginner, intermediate, advanced, expert)\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\')\\n","messages":[{"role":"user","content":{"type":"text","text":"Help me build a 45-minute cycling class at Easy difficulty for a 50+ audience.\\n\\nPlease follow these steps:\\n1. First, use the track_stats resource to understand what tracks are available\\n2. Use build_class_playlist with audience=\'50+\' to generate an initial playlist suggestion\\n3. Review the suggestions and use suggest_tracks_for_slot with audience=\'50+\' to find alternatives if any slot needs improvement\\n4. Check get_top_rated_tracks with audience=\'50+\' to see if any highly-rated tracks were missed\\n5. Present the final playlist in order with:\\n   - Phase/slot name\\n   - Track title and artist\\n   - BPM and intensity\\n   - Duration\\n   - Any relevant choreography notes\\n6. After presenting the playlist, ask if I want to rate any tracks with thumbs up/down using rate_track (with audience=\'50+\')\\n\\nConsider:\\n- Smooth BPM transitions between consecutive tracks\\n- Proper intensity arc (build up \xe2\x86\x92 peak \xe2\x86\x92 recover \xe2\x86\x92 peak \xe2\x86\x92 cool down)\\n- Mix of positions and resistance levels for variety\\n- Prefer tracks with positive feedback ratings\\n- Exclude tracks previously rated thumbs-down for this audience\\n- Songs that resonate with a 50+ demographic\\n"}}]}}\r\n\r\n'
2026-02-12 11:25:06,171 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:25:06,997 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:25:06.997677+00:00\r\n\r\n'
2026-02-12 11:25:20,064 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:46406 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:25:20,065 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7df4c92187c0>
2026-02-12 11:25:20,065 - mcp.server.lowlevel.server - INFO - Processing request of type ListToolsRequest
2026-02-12 11:25:20,065 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type ListToolsRequest
2026-02-12 11:25:20,066 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:25:20,066 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:25:20,066 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":6,"result":{"tools":[{"name":"search_tracks","description":"Search for tracks by musical and cycling criteria.\\n\\nUse this to find tracks matching specific BPM ranges, intensity levels,\\ntrack types (warmup, climb, sprint, etc.), riding positions, or artists.\\nThe keyword parameter searches across title, artist, album, and notes.\\n\\nArgs:\\n    bpm_min: Minimum BPM (e.g. 100)\\n    bpm_max: Maximum BPM (e.g. 140)\\n    intensity: Filter by intensity level (low, medium, high, extreme)\\n    track_type: Filter by track type (warmup, climb, sprint, recovery, cooldown, intervals, endurance)\\n    position: Filter by riding position\\n    artist: Filter by artist name (partial match)\\n    focus_area: Filter by focus area (e.g. endurance, strength)\\n    keyword: Search across title, artist, album, and notes\\n    limit: Maximum results to return (default 20)\\n","inputSchema":{"properties":{"bpm_min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Min"},"bpm_max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Max"},"intensity":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Intensity"},"track_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Track Type"},"position":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Position"},"artist":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Artist"},"focus_area":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Focus Area"},"keyword":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Keyword"},"limit":{"default":20,"title":"Limit","type":"integer"}},"title":"search_tracksArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"search_tracksOutput","type":"object"}},{"name":"suggest_tracks_for_slot","description":"Suggest the best tracks for a specific slot in a cycling class.\\n\\nGiven a slot type (warmup, climb, sprint, recovery, cooldown, intervals,\\nendurance), returns matching tracks ranked by feedback rating.\\nWhen audience is specified, tracks rated thumbs-down for that audience\\nare deprioritized, and thumbs-up tracks are boosted.\\n\\nArgs:\\n    slot_type: The class slot type (warmup, climb, sprint, recovery, cooldown, intervals, endurance)\\n    duration_min: Minimum track duration in minutes\\n    duration_max: Maximum track duration in minutes\\n    intensity: Preferred intensity (low, medium, high, extreme)\\n    bpm_min: Minimum BPM\\n    bpm_max: Maximum BPM\\n    exclude_titles: Comma-separated track titles to exclude (already in playlist)\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\') - filters out tracks rated down for this audience\\n    prefer_top_rated: Rank tracks with thumbs-up feedback higher (default true)\\n    limit: Maximum results (default 10)\\n","inputSchema":{"properties":{"slot_type":{"title":"Slot Type","type":"string"},"duration_min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Duration Min"},"duration_max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Duration Max"},"intensity":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Intensity"},"bpm_min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Min"},"bpm_max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Bpm Max"},"exclude_titles":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Exclude Titles"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"},"prefer_top_rated":{"default":true,"title":"Prefer Top Rated","type":"boolean"},"limit":{"default":10,"title":"Limit","type":"integer"}},"required":["slot_type"],"title":"suggest_tracks_for_slotArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"suggest_tracks_for_slotOutput","type":"object"}},{"name":"find_similar_tracks","description":"Find tracks similar to a given track based on BPM, intensity, and type.\\n\\nUseful for finding alternatives or substitutions for a track in a class.\\n\\nArgs:\\n    track_title: The title of the reference track\\n    bpm_tolerance: How close the BPM should be (default 15)\\n    limit: Maximum results (default 10)\\n","inputSchema":{"properties":{"track_title":{"title":"Track Title","type":"string"},"bpm_tolerance":{"default":15,"title":"Bpm Tolerance","type":"number"},"limit":{"default":10,"title":"Limit","type":"integer"}},"required":["track_title"],"title":"find_similar_tracksArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"find_similar_tracksOutput","type":"object"}},{"name":"get_track_details","description":"Get full details of a track including choreography cues.\\n\\nReturns all information about a track: metadata, cycling parameters,\\nchoreography breakdown, coaching cues, and notes.\\n\\nArgs:\\n    track_title: The title of the track (partial match supported)\\n","inputSchema":{"properties":{"track_title":{"title":"Track Title","type":"string"}},"required":["track_title"],"title":"get_track_detailsArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"get_track_detailsOutput","type":"object"}},{"name":"get_top_rated_tracks","description":"Get tracks with the best feedback ratings.\\n\\nShows tracks ranked by number of thumbs-up (or thumbs-down) ratings,\\noptionally filtered by usage context and/or audience demographic.\\n\\nArgs:\\n    context: Filter by usage context (e.g. warmup, climb, sprint)\\n    audience: Filter by audience demographic (e.g. \'50+\', \'mixed\', \'young\')\\n    rating: Rating type to rank by - \'up\' or \'down\' (default \'up\')\\n    limit: Maximum results (default 15)\\n","inputSchema":{"properties":{"context":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Context"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"},"rating":{"default":"up","title":"Rating","type":"string"},"limit":{"default":15,"title":"Limit","type":"integer"}},"title":"get_top_rated_tracksArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"get_top_rated_tracksOutput","type":"object"}},{"name":"get_feedback_summary","description":"Get a summary of all track feedback grouped by context and rating.\\n\\nReturns an overview of how many tracks have been rated up/down\\nin each context (warmup, climb, sprint, etc.), plus overall stats.\\n","inputSchema":{"properties":{},"title":"get_feedback_summaryArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"get_feedback_summaryOutput","type":"object"}},{"name":"build_class_playlist","description":"Build a suggested cycling class playlist with a proper workout arc.\\n\\nGenerates a class structure with tracks for each phase:\\nwarmup \xe2\x86\x92 building \xe2\x86\x92 peak (climbs/sprints/intervals) \xe2\x86\x92 recovery \xe2\x86\x92 cooldown.\\nPrefers top-rated tracks and avoids duplicates.\\nWhen audience is specified, tracks rated thumbs-down for that audience are excluded.\\n\\nArgs:\\n    duration_minutes: Target class duration in minutes (default 45)\\n    difficulty: Preferred difficulty - affects intensity selection\\n    theme: Optional theme or focus (e.g. \'climb heavy\', \'high energy\', \'endurance\')\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\') - excludes tracks rated down for this audience\\n","inputSchema":{"properties":{"duration_minutes":{"default":45,"title":"Duration Minutes","type":"integer"},"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Difficulty"},"theme":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Theme"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"}},"title":"build_class_playlistArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"build_class_playlistOutput","type":"object"}},{"name":"build_hybrid_playlist","description":"Build a full playlist using DB anchors plus OpenAI gap-fill suggestions.\\n\\nThis tool:\\n1) Builds a base playlist from local DB tracks.\\n2) Applies feedback filters to remove disliked tracks/artists.\\n3) Uses OpenAI to suggest additional tracks only when DB coverage is short.\\n4) Returns a merged, ordered playlist.\\n","inputSchema":{"properties":{"duration_minutes":{"default":45,"title":"Duration Minutes","type":"integer"},"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Difficulty"},"theme":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Theme"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"},"target_tracks":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"title":"Target Tracks"}},"title":"build_hybrid_playlistArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"build_hybrid_playlistOutput","type":"object"}},{"name":"list_routines","description":"List existing cycling routines/classes with their track counts.\\n\\nShows saved routines from base44 with key metadata.\\n\\nArgs:\\n    difficulty: Filter by difficulty (beginner, intermediate, advanced, expert)\\n    limit: Maximum results (default 20)\\n","inputSchema":{"properties":{"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Difficulty"},"limit":{"default":20,"title":"Limit","type":"integer"}},"title":"list_routinesArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"list_routinesOutput","type":"object"}},{"name":"rate_track","description":"Rate a track with thumbs up or down. Saves to local database AND syncs to base44.\\n\\nUse this after reviewing a track suggestion to record whether it\'s a good\\nfit. Ratings influence future suggestions - thumbs-up tracks get prioritized.\\n\\nArgs:\\n    track_title: The exact title of the track to rate\\n    rating: \'up\' for thumbs up, \'down\' for thumbs down\\n    context: Usage context (e.g. warmup, climb, sprint, recovery, cooldown)\\n    audience: Target audience demographic (e.g. \'50+\', \'mixed\', \'young\')\\n","inputSchema":{"properties":{"track_title":{"title":"Track Title","type":"string"},"rating":{"title":"Rating","type":"string"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Context"},"audience":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"title":"Audience"}},"required":["track_title","rating"],"title":"rate_trackArguments","type":"object"},"outputSchema":{"properties":{"result":{"title":"Result","type":"string"}},"required":["result"],"title":"rate_trackOutput","type":"object"}}]}}\r\n\r\n'
2026-02-12 11:25:20,067 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:25:21,999 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:25:21.999313+00:00\r\n\r\n'
2026-02-12 11:25:23,623 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
2026-02-12 11:25:23,623 - mcp.server.streamable_http - INFO - Terminating session: 3f51a63100904e3aad88312a2950e6d5
INFO:     192.168.1.4:46418 - "DELETE /mcp HTTP/1.1" 200 OK
2026-02-12 11:25:23,624 - mcp.server.streamable_http - DEBUG - Closing standalone SSE writer
2026-02-12 11:25:23,625 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:25:23,625 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:25:23,665 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:25:23,665 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: dbbd57b3611e426daf23365d9c1171fe
2026-02-12 11:25:23,668 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:25:23,681 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:46434 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:25:23,683 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:25:23,683 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":0,"result":{"protocolVersion":"2025-11-25","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:25:23,684 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:25:23,696 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:46438 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:25:23,697 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=None, jsonrpc='2.0')
2026-02-12 11:25:23,704 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:46446 - "GET /mcp HTTP/1.1" 200 OK
2026-02-12 11:25:26,140 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:46456 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:25:26,142 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7df4c9093650>
2026-02-12 11:25:26,142 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2026-02-12 11:25:26,142 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type ReadResourceRequest
2026-02-12 11:25:26,142 - mcp.server.fastmcp.resources.resource_manager - DEBUG - Getting resource
2026-02-12 11:25:26,174 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:25:26,175 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:25:26,175 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":1,"result":{"contents":[{"uri":"stats://tracks","mimeType":"text/plain","text":"{\\n  \\"total_tracks\\": 98,\\n  \\"by_track_type\\": [\\n    {\\n      \\"track_type\\": \\"Rhythm Ride\\",\\n      \\"count\\": 45,\\n      \\"avg_bpm\\": 120.4,\\n      \\"min_bpm\\": 92.0,\\n      \\"max_bpm\\": 172.3\\n    },\\n    {\\n      \\"track_type\\": \\"climb\\",\\n      \\"count\\": 4,\\n      \\"avg_bpm\\": 92.0,\\n      \\"min_bpm\\": 88.0,\\n      \\"max_bpm\\": 96.0\\n    },\\n    {\\n      \\"track_type\\": \\"warmup\\",\\n      \\"count\\": 3,\\n      \\"avg_bpm\\": 117.0,\\n      \\"min_bpm\\": 117.0,\\n      \\"max_bpm\\": 117.0\\n    },\\n    {\\n      \\"track_type\\": \\"sprint\\",\\n      \\"count\\": 2,\\n      \\"avg_bpm\\": 130.0,\\n      \\"min_bpm\\": 130.0,\\n      \\"max_bpm\\": 130.0\\n    },\\n    {\\n      \\"track_type\\": \\"recovery\\",\\n      \\"count\\": 1,\\n      \\"avg_bpm\\": 122.0,\\n      \\"min_bpm\\": 122.0,\\n      \\"max_bpm\\": 122.0\\n    },\\n    {\\n      \\"track_type\\": \\"endurance ride\\",\\n      \\"count\\": 1,\\n      \\"avg_bpm\\": 112.3,\\n      \\"min_bpm\\": 112.3,\\n      \\"max_bpm\\": 112.3\\n    },\\n    {\\n      \\"track_type\\": \\"Speed Intervals\\",\\n      \\"count\\": 1,\\n      \\"avg_bpm\\": 117.5,\\n      \\"min_bpm\\": 117.5,\\n      \\"max_bpm\\": 117.5\\n    },\\n    {\\n      \\"track_type\\": \\"cooldown\\",\\n      \\"count\\": 1,\\n      \\"avg_bpm\\": 93.0,\\n      \\"min_bpm\\": 93.0,\\n      \\"max_bpm\\": 93.0\\n    }\\n  ],\\n  \\"by_intensity\\": [\\n    {\\n      \\"intensity\\": \\"medium\\",\\n      \\"count\\": 49\\n    },\\n    {\\n      \\"intensity\\": \\"low\\",\\n      \\"count\\": 3\\n    },\\n    {\\n      \\"intensity\\": \\"high\\",\\n      \\"count\\": 1\\n    }\\n  ],\\n  \\"bpm_range\\": {\\n    \\"min_bpm\\": 67.0,\\n    \\"max_bpm\\": 172.3,\\n    \\"avg_bpm\\": 116.1\\n  }\\n}"}]}}\r\n\r\n'
2026-02-12 11:25:26,176 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:25:28,080 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:46462 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:25:28,082 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x7df4c9093050>
2026-02-12 11:25:28,082 - mcp.server.lowlevel.server - INFO - Processing request of type ListResourceTemplatesRequest
2026-02-12 11:25:28,082 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type ListResourceTemplatesRequest
2026-02-12 11:25:28,082 - mcp.server.fastmcp.resources.resource_manager - DEBUG - Listing templates
2026-02-12 11:25:28,082 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:25:28,082 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:25:28,082 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":2,"result":{"resourceTemplates":[]}}\r\n\r\n'
2026-02-12 11:25:28,083 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:25:38,706 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:25:38.706932+00:00\r\n\r\n'
2026-02-12 11:25:53,707 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:25:53.707604+00:00\r\n\r\n'
2026-02-12 11:26:08,708 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:26:08.708480+00:00\r\n\r\n'
2026-02-12 11:26:23,709 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:26:23.709232+00:00\r\n\r\n'
2026-02-12 11:26:38,710 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:26:38.710052+00:00\r\n\r\n'
2026-02-12 11:26:53,711 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:26:53.711128+00:00\r\n\r\n'
2026-02-12 11:27:08,712 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:27:08.712730+00:00\r\n\r\n'
2026-02-12 11:27:23,714 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:27:23.713953+00:00\r\n\r\n'
2026-02-12 11:27:38,715 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:27:38.715220+00:00\r\n\r\n'
2026-02-12 11:27:53,716 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:27:53.716208+00:00\r\n\r\n'
2026-02-12 11:28:08,717 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:28:08.717606+00:00\r\n\r\n'
2026-02-12 11:28:23,719 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:28:23.719100+00:00\r\n\r\n'
2026-02-12 11:28:38,722 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:28:38.722050+00:00\r\n\r\n'
2026-02-12 11:28:53,723 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:28:53.723203+00:00\r\n\r\n'
2026-02-12 11:29:08,724 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:29:08.724771+00:00\r\n\r\n'
2026-02-12 11:29:23,726 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:29:23.726151+00:00\r\n\r\n'
2026-02-12 11:29:38,727 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:29:38.727584+00:00\r\n\r\n'
2026-02-12 11:29:53,729 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:29:53.729435+00:00\r\n\r\n'
2026-02-12 11:30:08,730 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:30:08.730420+00:00\r\n\r\n'
2026-02-12 11:30:23,731 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:30:23.731418+00:00\r\n\r\n'
2026-02-12 11:30:38,732 - sse_starlette.sse - DEBUG - ping: b': ping - 2026-02-12 19:30:38.732203+00:00\r\n\r\n'
INFO:     Shutting down
INFO:     Waiting for connections to close. (CTRL+C to force quit)
2026-02-12 11:30:52,491 - mcp.server.streamable_http - DEBUG - Closing standalone SSE writer
ERROR:    ASGI callable returned without completing response.
INFO:     Waiting for application shutdown.
2026-02-12 11:30:52,521 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager shutting down
2026-02-12 11:30:52,522 - choreography-mcp - INFO - Database pool closed.
INFO:     Application shutdown complete.
INFO:     Finished server process [794174]
2026-02-12 11:30:53,083 - choreography-mcp - INFO - MCP HTTP auth enabled (Bearer token + scopes=mcp:access).
2026-02-12 11:30:53,086 - mcp.server.lowlevel.server - DEBUG - Initializing server 'choreography-db'
2026-02-12 11:30:53,086 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2026-02-12 11:30:53,087 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2026-02-12 11:30:53,087 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2026-02-12 11:30:53,087 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2026-02-12 11:30:53,087 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2026-02-12 11:30:53,087 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2026-02-12 11:30:53,087 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2026-02-12 11:30:53,102 - mcp.server.fastmcp.resources.resource_manager - DEBUG - Adding resource
2026-02-12 11:30:53,103 - choreography-mcp - INFO - Starting MCP server transport=streamable-http host=0.0.0.0 port=8000
2026-02-12 11:30:53,106 - asyncio - DEBUG - Using selector: EpollSelector
INFO:     Started server process [800351]
INFO:     Waiting for application startup.
2026-02-12 11:30:53,122 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager started
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     192.168.1.4:37256 - "GET /mcp HTTP/1.1" 404 Not Found
INFO:     192.168.1.4:37262 - "GET /mcp HTTP/1.1" 404 Not Found
2026-02-12 11:33:49,841 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:33:49,841 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: d13320142eec49258232897e4848662e
2026-02-12 11:33:49,843 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:33:49,860 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:41430 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:33:49,862 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:33:49,862 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:33:49,862 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:33:49,927 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:41442 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:33:49,929 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:33:49,947 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:41456 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:33:49,950 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x713a4ff2f9d0>
2026-02-12 11:33:49,950 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:33:49,950 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:33:49,950 - mcp.server.lowlevel.server - DEBUG - Tool cache miss for build_class_playlist, refreshing cache
2026-02-12 11:33:49,985 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:33:49,986 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:33:49,986 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 0,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": \\"Top of the Pops 1978\\",\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"}],"structuredContent":{"result":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 0,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": \\"Top of the Pops 1978\\",\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:33:49,986 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:35:20,600 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:35:20,601 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 76bd48febb73465f88c58376b9dfd43f
2026-02-12 11:35:20,606 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:35:20,629 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:33414 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:35:20,631 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:35:20,631 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:35:20,631 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:35:20,699 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:33430 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:35:20,701 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:35:20,717 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:33438 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:35:20,719 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x713a4fe562c0>
2026-02-12 11:35:20,719 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:35:20,719 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:35:20,760 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:35:20,761 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:35:20,761 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 0,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": \\"Top of the Pops 1978 Edition\\",\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"}],"structuredContent":{"result":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 0,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": \\"Top of the Pops 1978 Edition\\",\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:35:20,762 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:36:40,933 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:36:40,933 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 0da2091f6d114ed5bc086d5fa91b233f
2026-02-12 11:36:40,935 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:36:40,957 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:34998 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:36:40,959 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:36:40,959 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:36:40,960 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:36:41,022 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:35012 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:36:41,023 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:36:41,041 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:35014 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:36:41,041 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x713a4fe73bf0>
2026-02-12 11:36:41,041 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:36:41,041 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:36:41,080 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:36:41,080 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:36:41,081 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 0,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": \\"Top of the Pops 1978\\",\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"}],"structuredContent":{"result":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 0,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": \\"Top of the Pops 1978\\",\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:36:41,081 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:38:19,439 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:38:19,439 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: e967c8c033224c25a185625b05de9467
2026-02-12 11:38:19,441 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:38:19,461 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:40746 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:38:19,463 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:38:19,463 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:38:19,463 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:38:19,534 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:40758 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:38:19,535 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:38:19,553 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:40762 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:38:19,555 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x713a5000f460>
2026-02-12 11:38:19,555 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:38:19,555 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:38:19,612 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:38:19,613 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:38:19,613 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"class_length_minutes\\": 55,\\n  \\"target_track_count\\": 14,\\n  \\"returned_track_count\\": 0,\\n  \\"estimated_duration_minutes\\": 0,\\n  \\"tracks\\": []\\n}"}],"structuredContent":{"result":"{\\n  \\"class_length_minutes\\": 55,\\n  \\"target_track_count\\": 14,\\n  \\"returned_track_count\\": 0,\\n  \\"estimated_duration_minutes\\": 0,\\n  \\"tracks\\": []\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:38:19,613 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2026-02-12 11:39:02,381 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager shutting down
2026-02-12 11:39:02,383 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:39:02,383 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:39:02,384 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:39:02,384 - choreography-mcp - INFO - Database pool closed.
INFO:     Application shutdown complete.
INFO:     Finished server process [800351]
2026-02-12 11:39:02,849 - choreography-mcp - INFO - MCP HTTP auth enabled (Bearer token + scopes=mcp:access).
2026-02-12 11:39:02,853 - mcp.server.lowlevel.server - DEBUG - Initializing server 'choreography-db'
2026-02-12 11:39:02,853 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2026-02-12 11:39:02,853 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2026-02-12 11:39:02,853 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2026-02-12 11:39:02,853 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2026-02-12 11:39:02,853 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2026-02-12 11:39:02,853 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2026-02-12 11:39:02,853 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2026-02-12 11:39:02,867 - mcp.server.fastmcp.resources.resource_manager - DEBUG - Adding resource
2026-02-12 11:39:02,869 - choreography-mcp - INFO - Starting MCP server transport=streamable-http host=0.0.0.0 port=8000
2026-02-12 11:39:02,871 - asyncio - DEBUG - Using selector: EpollSelector
INFO:     Started server process [808784]
INFO:     Waiting for application startup.
2026-02-12 11:39:02,886 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager started
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2026-02-12 11:39:52,274 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:39:52,275 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 55c4347a6de0477c8165f0a250d52daa
2026-02-12 11:39:52,278 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:39:52,303 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:43712 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:39:52,308 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:39:52,309 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:39:52,310 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:39:52,357 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:43722 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:39:52,358 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:39:52,374 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:43726 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:39:52,375 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x78e49b92ee90>
2026-02-12 11:39:52,375 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:39:52,375 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:39:52,375 - mcp.server.lowlevel.server - DEBUG - Tool cache miss for build_class_playlist, refreshing cache
2026-02-12 11:39:52,415 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:39:52,415 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:39:52,415 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 0,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": \\"Top of the Pops 1989 Edition\\",\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"}],"structuredContent":{"result":"{\\n  \\"target_duration\\": 55,\\n  \\"estimated_duration\\": 0,\\n  \\"difficulty\\": \\"intermediate\\",\\n  \\"theme\\": \\"Top of the Pops 1989 Edition\\",\\n  \\"playlist\\": [\\n    {\\n      \\"phase\\": \\"Warmup\\",\\n      \\"suggested_types\\": [\\n        \\"warmup\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Build\\",\\n      \\"suggested_types\\": [\\n        \\"endurance\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 1\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Active Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\",\\n        \\"endurance\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 2\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\",\\n        \\"intervals\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Recovery\\",\\n      \\"suggested_types\\": [\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Peak 3\\",\\n      \\"suggested_types\\": [\\n        \\"climb\\",\\n        \\"sprint\\"\\n      ],\\n      \\"tracks\\": []\\n    },\\n    {\\n      \\"phase\\": \\"Cooldown\\",\\n      \\"suggested_types\\": [\\n        \\"cooldown\\",\\n        \\"recovery\\"\\n      ],\\n      \\"tracks\\": []\\n    }\\n  ]\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:39:52,416 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:40:42,515 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:40:42,516 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 422063879518410b9dfa593999753eda
2026-02-12 11:40:42,521 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:40:42,547 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:43882 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:40:42,550 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:40:42,550 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:40:42,551 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:40:42,605 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:43884 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:40:42,606 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:40:42,627 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:43894 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:40:42,629 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x78e49b856c40>
2026-02-12 11:40:42,629 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:40:42,629 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:40:42,702 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:40:42,703 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:40:42,703 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"class_length_minutes\\": 55,\\n  \\"target_track_count\\": 14,\\n  \\"returned_track_count\\": 0,\\n  \\"estimated_duration_minutes\\": 0,\\n  \\"tracks\\": []\\n}"}],"structuredContent":{"result":"{\\n  \\"class_length_minutes\\": 55,\\n  \\"target_track_count\\": 14,\\n  \\"returned_track_count\\": 0,\\n  \\"estimated_duration_minutes\\": 0,\\n  \\"tracks\\": []\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:40:42,704 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:41:15,332 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:41:15,332 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: d5ae436ea314439ca529e4de42a61ddb
2026-02-12 11:41:15,335 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:41:15,371 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:53006 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:41:15,373 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:41:15,373 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:41:15,373 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:41:15,432 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:53022 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:41:15,434 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:41:15,453 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:53034 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:41:15,454 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x78e49b873bf0>
2026-02-12 11:41:15,455 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:41:15,455 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:41:15,504 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:41:15,505 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:41:15,505 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"class_length_minutes\\": 55,\\n  \\"target_track_count\\": 14,\\n  \\"returned_track_count\\": 0,\\n  \\"estimated_duration_minutes\\": 0,\\n  \\"tracks\\": []\\n}"}],"structuredContent":{"result":"{\\n  \\"class_length_minutes\\": 55,\\n  \\"target_track_count\\": 14,\\n  \\"returned_track_count\\": 0,\\n  \\"estimated_duration_minutes\\": 0,\\n  \\"tracks\\": []\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:41:15,506 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2026-02-12 11:42:49,927 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager shutting down
2026-02-12 11:42:49,929 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:42:49,929 - choreography-mcp - INFO - Database pool closed.
2026-02-12 11:42:49,930 - choreography-mcp - INFO - Database pool closed.
INFO:     Application shutdown complete.
INFO:     Finished server process [808784]
2026-02-12 11:42:50,440 - choreography-mcp - INFO - MCP HTTP auth enabled (Bearer token + scopes=mcp:access).
2026-02-12 11:42:50,444 - mcp.server.lowlevel.server - DEBUG - Initializing server 'choreography-db'
2026-02-12 11:42:50,444 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2026-02-12 11:42:50,444 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2026-02-12 11:42:50,444 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2026-02-12 11:42:50,444 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2026-02-12 11:42:50,444 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2026-02-12 11:42:50,444 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2026-02-12 11:42:50,444 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2026-02-12 11:42:50,458 - mcp.server.fastmcp.resources.resource_manager - DEBUG - Adding resource
2026-02-12 11:42:50,460 - choreography-mcp - INFO - Starting MCP server transport=streamable-http host=0.0.0.0 port=8000
2026-02-12 11:42:50,462 - asyncio - DEBUG - Using selector: EpollSelector
INFO:     Started server process [812623]
INFO:     Waiting for application startup.
2026-02-12 11:42:50,477 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager started
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2026-02-12 11:42:56,190 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:42:56,190 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: e102dfb4ddef4260b39c69eaed7e1e5b
2026-02-12 11:42:56,191 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:42:56,207 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:47096 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:42:56,208 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:42:56,209 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"init-1","result":{"protocolVersion":"2024-11-05","capabilities":{"experimental":{},"prompts":{"listChanged":false},"resources":{"subscribe":false,"listChanged":false},"tools":{"listChanged":false}},"serverInfo":{"name":"choreography-db","version":"1.26.0"}}}\r\n\r\n'
2026-02-12 11:42:56,209 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:42:56,260 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:47106 - "POST /mcp HTTP/1.1" 202 Accepted
2026-02-12 11:42:56,261 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2026-02-12 11:42:56,278 - mcp.server.streamable_http_manager - DEBUG - Session already exists, handling request directly
INFO:     192.168.1.4:47116 - "POST /mcp HTTP/1.1" 200 OK
2026-02-12 11:42:56,280 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x78bde6bfee90>
2026-02-12 11:42:56,280 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2026-02-12 11:42:56,280 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2026-02-12 11:42:56,280 - mcp.server.lowlevel.server - DEBUG - Tool cache miss for recommend_class_tracks, refreshing cache
2026-02-12 11:42:56,324 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.openai.com:443
2026-02-12 11:43:07,310 - urllib3.connectionpool - DEBUG - https://api.openai.com:443 "POST /v1/chat/completions HTTP/1.1" 200 None
2026-02-12 11:43:07,327 - mcp.server.lowlevel.server - DEBUG - Response sent
2026-02-12 11:43:07,328 - mcp.server.streamable_http - DEBUG - Closing SSE writer
2026-02-12 11:43:07,328 - sse_starlette.sse - DEBUG - chunk: b'event: message\r\ndata: {"jsonrpc":"2.0","id":"tool-1","result":{"content":[{"type":"text","text":"{\\n  \\"class_length_minutes\\": 55,\\n  \\"target_track_count\\": 14,\\n  \\"returned_track_count\\": 14,\\n  \\"db_track_count\\": 0,\\n  \\"ai_track_count\\": 14,\\n  \\"estimated_duration_minutes\\": 0,\\n  \\"tracks\\": [\\n    {\\n      \\"title\\": \\"Stayin\' Alive\\",\\n      \\"artist\\": \\"Bee Gees\\",\\n      \\"bpm\\": 104,\\n      \\"suggest_type\\": \\"warmup\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"I Will Survive\\",\\n      \\"artist\\": \\"Gloria Gaynor\\",\\n      \\"bpm\\": 117,\\n      \\"suggest_type\\": \\"build\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Le Freak\\",\\n      \\"artist\\": \\"Chic\\",\\n      \\"bpm\\": 120,\\n      \\"suggest_type\\": \\"sprint\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Don\'t Stop \'Til You Get Enough\\",\\n      \\"artist\\": \\"Michael Jackson\\",\\n      \\"bpm\\": 123,\\n      \\"suggest_type\\": \\"sprint\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Hot Stuff\\",\\n      \\"artist\\": \\"Donna Summer\\",\\n      \\"bpm\\": 126,\\n      \\"suggest_type\\": \\"climb\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Funkytown\\",\\n      \\"artist\\": \\"Lipps Inc.\\",\\n      \\"bpm\\": 120,\\n      \\"suggest_type\\": \\"build\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"September\\",\\n      \\"artist\\": \\"Earth, Wind & Fire\\",\\n      \\"bpm\\": 126,\\n      \\"suggest_type\\": \\"sprint\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"I Love the Nightlife\\",\\n      \\"artist\\": \\"Alicia Bridges\\",\\n      \\"bpm\\": 120,\\n      \\"suggest_type\\": \\"build\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Take a Chance on Me\\",\\n      \\"artist\\": \\"ABBA\\",\\n      \\"bpm\\": 104,\\n      \\"suggest_type\\": \\"recovery\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Y.M.C.A.\\",\\n      \\"artist\\": \\"Village People\\",\\n      \\"bpm\\": 127,\\n      \\"suggest_type\\": \\"sprint\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Dancing Queen\\",\\n      \\"artist\\": \\"ABBA\\",\\n      \\"bpm\\": 100,\\n      \\"suggest_type\\": \\"cooldown\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"We Are Family\\",\\n      \\"artist\\": \\"Sister Sledge\\",\\n      \\"bpm\\": 123,\\n      \\"suggest_type\\": \\"build\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Good Times\\",\\n      \\"artist\\": \\"Chic\\",\\n      \\"bpm\\": 110,\\n      \\"suggest_type\\": \\"recovery\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Last Dance\\",\\n      \\"artist\\": \\"Donna Summer\\",\\n      \\"bpm\\": 120,\\n      \\"suggest_type\\": \\"cooldown\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    }\\n  ]\\n}"}],"structuredContent":{"result":"{\\n  \\"class_length_minutes\\": 55,\\n  \\"target_track_count\\": 14,\\n  \\"returned_track_count\\": 14,\\n  \\"db_track_count\\": 0,\\n  \\"ai_track_count\\": 14,\\n  \\"estimated_duration_minutes\\": 0,\\n  \\"tracks\\": [\\n    {\\n      \\"title\\": \\"Stayin\' Alive\\",\\n      \\"artist\\": \\"Bee Gees\\",\\n      \\"bpm\\": 104,\\n      \\"suggest_type\\": \\"warmup\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"I Will Survive\\",\\n      \\"artist\\": \\"Gloria Gaynor\\",\\n      \\"bpm\\": 117,\\n      \\"suggest_type\\": \\"build\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Le Freak\\",\\n      \\"artist\\": \\"Chic\\",\\n      \\"bpm\\": 120,\\n      \\"suggest_type\\": \\"sprint\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Don\'t Stop \'Til You Get Enough\\",\\n      \\"artist\\": \\"Michael Jackson\\",\\n      \\"bpm\\": 123,\\n      \\"suggest_type\\": \\"sprint\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Hot Stuff\\",\\n      \\"artist\\": \\"Donna Summer\\",\\n      \\"bpm\\": 126,\\n      \\"suggest_type\\": \\"climb\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Funkytown\\",\\n      \\"artist\\": \\"Lipps Inc.\\",\\n      \\"bpm\\": 120,\\n      \\"suggest_type\\": \\"build\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"September\\",\\n      \\"artist\\": \\"Earth, Wind & Fire\\",\\n      \\"bpm\\": 126,\\n      \\"suggest_type\\": \\"sprint\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"I Love the Nightlife\\",\\n      \\"artist\\": \\"Alicia Bridges\\",\\n      \\"bpm\\": 120,\\n      \\"suggest_type\\": \\"build\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Take a Chance on Me\\",\\n      \\"artist\\": \\"ABBA\\",\\n      \\"bpm\\": 104,\\n      \\"suggest_type\\": \\"recovery\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Y.M.C.A.\\",\\n      \\"artist\\": \\"Village People\\",\\n      \\"bpm\\": 127,\\n      \\"suggest_type\\": \\"sprint\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Dancing Queen\\",\\n      \\"artist\\": \\"ABBA\\",\\n      \\"bpm\\": 100,\\n      \\"suggest_type\\": \\"cooldown\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"We Are Family\\",\\n      \\"artist\\": \\"Sister Sledge\\",\\n      \\"bpm\\": 123,\\n      \\"suggest_type\\": \\"build\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Good Times\\",\\n      \\"artist\\": \\"Chic\\",\\n      \\"bpm\\": 110,\\n      \\"suggest_type\\": \\"recovery\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    },\\n    {\\n      \\"title\\": \\"Last Dance\\",\\n      \\"artist\\": \\"Donna Summer\\",\\n      \\"bpm\\": 120,\\n      \\"suggest_type\\": \\"cooldown\\",\\n      \\"duration_minutes\\": null,\\n      \\"spotify_id\\": null,\\n      \\"spotify_url\\": null,\\n      \\"source\\": \\"ai\\"\\n    }\\n  ]\\n}"},"isError":false}}\r\n\r\n'
2026-02-12 11:43:07,330 - sse_starlette.sse - DEBUG - Got event: http.disconnect. Stop streaming.
2026-02-12 11:47:19,177 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:47:19,177 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 8f84fb7f3ee840b1b1596f183d856ffe
2026-02-12 11:47:19,181 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:47:19,197 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:50808 - "POST /mcp HTTP/1.1" 406 Not Acceptable
2026-02-12 11:47:40,797 - mcp.server.streamable_http_manager - DEBUG - Creating new transport
2026-02-12 11:47:40,797 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 9d1ee899c87041aba5a7c076c5abb526
2026-02-12 11:47:40,801 - choreography-mcp - INFO - Initializing database connection pool (host=192.168.1.3 port=5432 db=cyclesync user=glen)...
2026-02-12 11:47:40,826 - choreography-mcp - INFO - MCP server ready.
INFO:     192.168.1.4:55212 - "POST /mcp HTTP/1.1" 406 Not Acceptable
